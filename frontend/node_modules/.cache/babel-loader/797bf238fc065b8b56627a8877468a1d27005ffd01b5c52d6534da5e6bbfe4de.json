{"ast":null,"code":"var _jsxFileName = \"/Users/sadman/Codes/MERN/CSE470/gym-management/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport { BrowserRouter as Router, Routes, Route, Navigate } from \"react-router-dom\";\nimport { onAuthStateChanged } from \"firebase/auth\";\nimport { auth, db } from \"./firebase\";\nimport { doc, getDoc } from \"firebase/firestore\";\nimport Login from \"./components/Login\";\nimport Register from \"./components/Register\";\nimport Dashboard from \"./components/Dashboard\";\nimport AdminDashboard from \"./components/AdminDashboard\";\nimport MemberProfile from \"./components/MemberProfile\";\nimport TrainerPage from \"./components/TrainerPage\";\nimport \"./App.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [user, setUser] = useState(null);\n  const [userData, setUserData] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  // Rehydrate user after refresh and fetch role\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, async currentUser => {\n      if (currentUser) {\n        setUser(currentUser);\n        try {\n          const docRef = doc(db, \"users\", currentUser.uid);\n          const docSnap = await getDoc(docRef);\n          if (docSnap.exists()) {\n            setUserData(docSnap.data());\n          }\n        } catch (err) {\n          console.error(\"Error fetching user data:\", err);\n        }\n      } else {\n        setUser(null);\n        setUserData(null);\n      }\n      setLoading(false);\n    });\n    return () => unsubscribe();\n  }, []);\n  if (loading) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 23\n  }, this);\n  if (!user) {\n    return /*#__PURE__*/_jsxDEV(Router, {\n      children: /*#__PURE__*/_jsxDEV(Routes, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          path: \"/\",\n          element: /*#__PURE__*/_jsxDEV(Login, {\n            setUser: setUser\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 36\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/register\",\n          element: /*#__PURE__*/_jsxDEV(Register, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 44\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"*\",\n          element: /*#__PURE__*/_jsxDEV(Navigate, {\n            to: \"/\",\n            replace: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 36\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Determine default route based on role\n  let defaultRoute = \"/dashboard\";\n  if ((userData === null || userData === void 0 ? void 0 : userData.role) === \"Admin\") defaultRoute = \"/admin\";else if ((userData === null || userData === void 0 ? void 0 : userData.role) === \"Member\") defaultRoute = \"/profile\";else if ((userData === null || userData === void 0 ? void 0 : userData.role) === \"Trainer\") defaultRoute = \"/trainer\";\n  return /*#__PURE__*/_jsxDEV(Router, {\n    children: /*#__PURE__*/_jsxDEV(Routes, {\n      children: [/*#__PURE__*/_jsxDEV(Route, {\n        path: \"/dashboard\",\n        element: /*#__PURE__*/_jsxDEV(Dashboard, {\n          user: userData\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 43\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/admin\",\n        element: /*#__PURE__*/_jsxDEV(AdminDashboard, {\n          user: userData\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 39\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/profile\",\n        element: /*#__PURE__*/_jsxDEV(MemberProfile, {\n          user: userData\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 41\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/trainer\",\n        element: /*#__PURE__*/_jsxDEV(TrainerPage, {\n          user: userData\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 41\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"*\",\n        element: /*#__PURE__*/_jsxDEV(Navigate, {\n          to: defaultRoute,\n          replace: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 34\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"4Lvrj5jq4weTYzI57B4yrS0C4B0=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useState","useEffect","BrowserRouter","Router","Routes","Route","Navigate","onAuthStateChanged","auth","db","doc","getDoc","Login","Register","Dashboard","AdminDashboard","MemberProfile","TrainerPage","jsxDEV","_jsxDEV","App","_s","user","setUser","userData","setUserData","loading","setLoading","unsubscribe","currentUser","docRef","uid","docSnap","exists","data","err","console","error","children","fileName","_jsxFileName","lineNumber","columnNumber","path","element","to","replace","defaultRoute","role","_c","$RefreshReg$"],"sources":["/Users/sadman/Codes/MERN/CSE470/gym-management/frontend/src/App.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { BrowserRouter as Router, Routes, Route, Navigate } from \"react-router-dom\";\nimport { onAuthStateChanged } from \"firebase/auth\";\nimport { auth, db } from \"./firebase\";\nimport { doc, getDoc } from \"firebase/firestore\";\n\nimport Login from \"./components/Login\";\nimport Register from \"./components/Register\";\nimport Dashboard from \"./components/Dashboard\";\nimport AdminDashboard from \"./components/AdminDashboard\";\nimport MemberProfile from \"./components/MemberProfile\";\nimport TrainerPage from \"./components/TrainerPage\";\n\nimport \"./App.css\";\n\nfunction App() {\n  const [user, setUser] = useState(null);\n  const [userData, setUserData] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  // Rehydrate user after refresh and fetch role\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, async (currentUser) => {\n      if (currentUser) {\n        setUser(currentUser);\n        try {\n          const docRef = doc(db, \"users\", currentUser.uid);\n          const docSnap = await getDoc(docRef);\n          if (docSnap.exists()) {\n            setUserData(docSnap.data());\n          }\n        } catch (err) {\n          console.error(\"Error fetching user data:\", err);\n        }\n      } else {\n        setUser(null);\n        setUserData(null);\n      }\n      setLoading(false);\n    });\n    return () => unsubscribe();\n  }, []);\n\n  if (loading) return <p>Loading...</p>;\n\n  if (!user) {\n    return (\n      <Router>\n        <Routes>\n          <Route path=\"/\" element={<Login setUser={setUser} />} />\n          <Route path=\"/register\" element={<Register />} />\n          <Route path=\"*\" element={<Navigate to=\"/\" replace />} />\n        </Routes>\n      </Router>\n    );\n  }\n\n  // Determine default route based on role\n  let defaultRoute = \"/dashboard\";\n  if (userData?.role === \"Admin\") defaultRoute = \"/admin\";\n  else if (userData?.role === \"Member\") defaultRoute = \"/profile\";\n  else if (userData?.role === \"Trainer\") defaultRoute = \"/trainer\";\n\n  return (\n    <Router>\n      <Routes>\n        <Route path=\"/dashboard\" element={<Dashboard user={userData} />} />\n        <Route path=\"/admin\" element={<AdminDashboard user={userData} />} />\n        <Route path=\"/profile\" element={<MemberProfile user={userData} />} />\n        <Route path=\"/trainer\" element={<TrainerPage user={userData} />} />\n        <Route path=\"*\" element={<Navigate to={defaultRoute} replace />} />\n      </Routes>\n    </Router>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}